{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "type": "object",
    "properties": {
        "custom_recognition": {
            "enum": [
                "FindToChallenge",
                "FindPlantableFlower",
                "FlipCard",
                "find_bonds_without_enough_token"
            ]
        },
        "custom_recognition_param": {
            "anyOf": [
                {
                    "$ref": "#/$defs/FindToChallengeParam"
                },
                {
                    "$ref": "#/$defs/FindPlantableFlowerParam"
                },
                {
                    "$ref": "#/$defs/FlipCardParam"
                },
                {
                    "$ref": "#/$defs/FindBondsWithoutEnoughTokenParam"
                }
            ]
        }
    },
    "$defs": {
        "FindToChallengeParam": {
            "type": "object",
            "description": "在积分赛中寻找可以挑战的对象，通过比较我方战力与敌方战力来决定是否挑战",
            "markdownDescription": "在积分赛中寻找可以挑战的对象\n\n**功能说明：**\n- 读取我方小队战力\n- 遍历4个敌方小队，读取战力并比较\n- 找到第一个战力不高于我方的敌队\n- 返回对应的挑战按钮位置\n\n**返回值：**\n- `box`: 挑战按钮的位置\n- `detail`: 空对象",
            "properties": {}
        },
        "FindPlantableFlowerParam": {
            "type": "object",
            "description": "在选花界面中寻找可以种植的花（需要至少10个种子）",
            "markdownDescription": "在选花界面中寻找可以种植的花\n\n**功能说明：**\n- 检测5种花的种子数量\n- 从左到右遍历，找到第一个种子≥10的花\n- 返回对应的种植按钮位置\n\n**种子配置：**\n- 第1-5种花分别对应不同的ROI区域\n- 每种花有两个ROI：种子数量文本ROI和按钮ROI\n\n**返回值：**\n- `box`: 种植按钮的位置，或无效box (0,0,1,1)\n- `detail.flower_num`: 可种植的花序号(1-5)\n- `detail.seed_count`: 当前种子数量\n- `detail.btn_roi`: 按钮ROI坐标\n- `detail.has_valid_target`: false表示无可用种子",
            "properties": {}
        },
        "FlipCardParam": {
            "type": "object",
            "description": "4x4翻牌游戏算法，优先同方向生长以连成4个紫色牌",
            "markdownDescription": "4x4翻牌游戏算法逻辑\n\n**游戏规则：**\n1. 胜利判定：仅统计紫色牌数量，连续4个判定胜利\n2. 初始状态：优先选橙色不在的对角线牌\n3. 紫色生长：按单一方向（行/列/对角线）的最高紫色数评分\n\n**评分策略：**\n- 有橙色的方向，紫色数直接计0\n- 同最高分下，优先选该方向内的位置\n- 优先级：行 > 列 > 对角线\n- 双对角线橙色时忽略对角线优先级\n\n**卡牌类型：**\n- 0: 未翻开\n- 1: 紫色牌\n- 2: 橙色牌\n- 3: 识别失败\n\n**返回值：**\n- `box`: 要翻开的牌的位置，或提示框位置，或无效box\n- `detail.action`: \"flip_initial\"/\"flip_growth\"/\"click_tip\"\n- `detail.flip_pos`: 翻牌位置(1-4, 1-4)\n- `detail.flip_roi`: 翻牌ROI坐标\n- `detail.is_win`: 是否胜利\n- `detail.has_valid_target`: 是否有有效目标",
            "properties": {}
        },
        "FindBondsWithoutEnoughTokenParam": {
            "type": "object",
            "description": "检查token数量是否小于5，用于决定是否继续羁绊任务",
            "markdownDescription": "检查token数量\n\n**功能说明：**\n- 读取固定ROI区域的token数量\n- token < 5: 返回识别通过（非空box）\n- token ≥ 5 或识别失败: 返回识别未通过（空box）\n\n**ROI配置：**\n- 固定区域：[846, 639, 111, 80]\n\n**返回值：**\n- `box`: token<5时返回 (0,0,1,1)，否则返回 None\n- `detail.token_count`: 识别到的token数量\n- `detail.passed`: 是否通过检查",
            "properties": {}
        }
    }
}
